<div id="tracking_warning" class="popup-bottom">
  <div class="tracking-inside">
    {{#lang "de"}}Die Webseite logiert Zahl der Benutzer.{{else}}Цей вебсайт рахує кількість відвідувачів.{{/lang}}
    <a href="{{link "tech.html"}}">{{#lang "de"}}Mehr Info hier...{{else}}Детальніше тут...{{/lang}}</a><br/>
    {{#lang "de"}}Bitte erlaube Tracking mit zufälliges Client ID.{{else}}Будь ласка, дозвольте логувати з випадковим ідентифікатором.{{/lang}}
    <div class="buttons">
      <button class="primary" onclick="window.selectTracking('true')">{{#lang "de"}}Erlauben{{else}}Дозволити{{/lang}}</button>
      <button onclick="window.selectTracking('anonymous')">{{#lang "de"}}Anonymes Tracking{{else}}Анонімне логування{{/lang}}</button>
    </div>
  </div>
</div>
<script>
  var el = document.getElementById('tracking_warning');
  window['selectTracking'] = (option) => {
    var cid = localStorage.getItem('clientId');
    if (!cid) {
      var clientId = '';
      for (var i = 0; i < 20; i++) clientId += String.fromCharCode(97 + Math.floor(Math.random()*26));
      localStorage.setItem('clientId', clientId);
    }
    localStorage.setItem('allowTracking', option);
    location.reload();
  };
  var at = localStorage.getItem('allowTracking');
  if (!at || at === 'false') {
    setTimeout(() => el.classList.add('popup-bottom-appear'), 1);
  }
</script>
