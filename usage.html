<!doctype html public "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">

<html lang="de">
  <head>
    <meta charset="utf-8">
    <title>MotoWien</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="images\motowien_icon.png">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>

    <h1>Motorrad rund um Wien: Nutzerzahl</h1>
    <div class="menu">
      <a  href="index.html">Home</a>
      <a  href="trips.html">Routes</a>
      <a class="active" href="tech.html">Technologie</a>
      <a  href="docs/stb.html">Staatsb.</a>
    </div>
    <div class="page-content">
    <div class="content">
      <h5>Insgesamt seit beginn der Messung</h5>
      <p>
        Besuche: <span id="count-all">Loading...</span>
      </p>
      <p>
        Nutzer: <span id="count-all-user">Loading...</span>
      </p>

      <h5>Letzte 24 Stunden</h5>
      <p>
        Besuche: <span id="count-24h">Loading...</span>
      </p>
      <p>
        Nutzer: <span id="count-24h-user">Loading...</span>
      </p>

      <br/>
      <p>Alle "anonyous" Nutzer, wo der Nutzer Client-ID Tracking nicht erlaubt hat, sind als 1 Nutzer gezahlt.</p>
    </div>
    <script>
      var st = (id, v) => document.getElementById(id).innerHTML = `<b>${v}</b>`;
      fetch('https://lissov.net/api/visitors/stats')
        .then(x => {
          x.json().then(u => {
            st('count-all', u.totalCount);
            st('count-all-user', u.totalUserCount);
            st('count-24h', u.last24hCount);
            st('count-24h-user', u.last24hUserCount);
          });
        });
    </script>

    </div>
    <div class="footer">
      <div class="footer-content">
        <p>2023 &#169; Pavlo Lissov</p>
        <p>Alle Rechte der Bilder liegen bei Pavlo Lissov</p>
        <p>Kontakt: <a href="mailto: admin@lissov.net?subject=MotoWien">Send email</a></p>  
      </div>
    </div>
    <script>
      var t = localStorage.getItem('allowTracking');
      if (t !== 'false') {
        var cid = t === 'true' ? localStorage.getItem('clientId') : 'anonymous';
        var x = new XMLHttpRequest();
        x.open('GET', 'https://lissov.net/api/visitors/log?pageName=usage.html&clientId=' + cid, true);
        x.send();
      }
    </script>
    
  </body>
</html>
