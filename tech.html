<!doctype html public "-//W3C//DTD HTML 4.01//EN"
  "http://www.w3.org/TR/html4/strict.dtd">

<html lang="de">
  <head>
    <meta charset="utf-8">
    <title>MotoWien</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/x-icon" href="images\motowien_icon.png">
    <link rel="stylesheet" href="styles.css">
  </head>
  <body>

    <h1>Motorrad rund um Wien: Technologie</h1>
    <div class="menu">
      <a  href="index.html">Home</a>
      <a  href="trips.html">Routes</a>
      <a class="active" href="tech.html">Technologie</a>
      <a  href="docs/stb.html">Staatsb.</a>
    </div>
    <div class="page-content">
    <div class="content">
      <p>
        Diese Webseite ist auf pures statisches HTML und CSS gemacht. Ist minimalistisch klein und hoffentlich nicht all zu hässlich.
        Ich nutze ein kleinen Engine um mit dem Templates dieses Website zu konstruiren.
        Mehr details dazu in meinem <a href="https://github.com/Lissov/sitemplate" target="_blank">GitHub</a>.
      </p>

      <h3>Zahlen der Benutzer</h3>
      <p>
        Ich hätte gerne wissen, ob Leute (ind wie viel) meine Website sehen.
        Dafür habe ich einfache Counter integriert: wann jede Seite geöffnet ist, dies ist auf meinem Server logiert.
        Wenn erlaubt, mit zufälliges Client ID.
        Dafür sind <b>keine</b> Personenbezogene Daten übermittelt oder gespeichert.
        Es gibt Optionen:
        <ul>
          <li><b>Erlauben</b>: ein <u>zufälliges</u> Identifikator ist generiert und im Browser gespeichert, und ist dann zu Server gesendet.
            Dieser Identifikator ist rein zufällig und ist nicht zum User, Hardware oder Software abhängig.
            Das dient nur um Zahl von unikale Nutzer zu wissen, so dass ich dich von andere Nutzer unterscheiden kann.
            <b>Ich bitte, diese Option zu wählen.</b>
          </li>
          <li><b>Anonym</b>: dasselbe aber mit "anonymous" als ID.
            So kann ich die Nutzer nicht unterscheiden, also kann nicht wissen ob es mehre Leute sind oder einer vielmals die Seite anschaut.
            Aber besser als nichts.
          </li>
        </ul>

        <p id="tracking-option"></p>
        <button id="tracking-option-change" onclick="localStorage.removeItem('allowTracking'); location.reload();">Wahl ändern</button>
        <p id="tracking-history"></p>
      </p>
    </div>
    <script>
      var o = localStorage.getItem('allowTracking');
      var ot = document.getElementById('tracking-option');
      if (o === 'anonymous') ot.innerHTML = 'Du hast die Option gewählt: <b>Anonym</b>.'
        else if (o === 'true') ot.innerHTML = 'Du hast die Option gewählt: <b>Erlauben</b>. Danke!'
        else document.getElementById('tracking-option-change').style = 'display: none';
      var clientId = localStorage.getItem('clientId');
      if (!!clientId)
        document.getElementById('tracking-history').innerHTML = `Du bist oder warst mit Identifier [${clientId}] logiert. Um die logs zu löschen, sende mir diese per EMail.`;
      else
        document.getElementById('tracking-history').style = 'display: none';
    </script>

    </div>
    <div class="footer">
      <div class="footer-content">
        <p>2023 &#169; Pavlo Lissov</p>
        <p>Alle Rechte der Bilder liegen bei Pavlo Lissov</p>
        <p>Kontakt: <a href="mailto: admin@lissov.net?subject=MotoWien">Send email</a></p>  
      </div>
    </div>
    <script>
      var t = localStorage.getItem('allowTracking');
      if (t !== 'false') {
        var cid = t === 'true' ? localStorage.getItem('clientId') : 'anonymous';
        var x = new XMLHttpRequest();
        x.open('GET', 'https://lissov.net/VisitorCount/Log?pageName=tech.html&clientId=' + cid, true);
        x.send();
      }
    </script>
    
  </body>
</html>

<div id="tracking_warning" class="popup-bottom">
  <div class="tracking-inside">
    Die Webseite logiert Zahl der Benutzer. <a href="tech.html">Mehr Info hier...</a><br/>
    Bitte erlaube Tracking mit zufälliges Client ID.
    <div class="buttons">
      <button class="primary" onclick="window.selectTracking('true')">Erlauben</button>
      <button onclick="window.selectTracking('anonymous')">Anonymes Tracking</button>
    </div>
  </div>
</div>
<script>
  var el = document.getElementById('tracking_warning');
  window['selectTracking'] = (option) => {
    var cid = localStorage.getItem('clientId');
    if (!cid) {
      var clientId = '';
      for (var i = 0; i < 20; i++) clientId += String.fromCharCode(97 + Math.floor(Math.random()*26));
      localStorage.setItem('clientId', clientId);
    }
    localStorage.setItem('allowTracking', option);
    location.reload();
  };
  var at = localStorage.getItem('allowTracking');
  if (!at || at === 'false') {
    setTimeout(() => el.classList.add('popup-bottom-appear'), 1);
  }
</script>

